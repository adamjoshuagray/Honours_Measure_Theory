\documentclass{unswmaths}
\usepackage{unswshortcuts}
\usepackage{dsfont}
\begin{document}
\author{Adam J. Gray}
\title{Assignment 1}
\subject{Measure Theory}
\studentno{3329798}

\newcommand{\llra}{\Leftrightarrow}

\unswtitle

\section{}
\subsection{}
Define
\begin{align*}
    \ell_n &= \sum_{k=1}^{N_n} \alpha_k \chi_{C_k} \\
    u_n &= \sum_{k=1}^{N_n} \beta_k \chi_{C_k} 
\end{align*}
where $ \alpha_k := \inf\{ f(x) : x \in C_k \} $ and $ \beta_k := \sup\{ f(x) : x \in C_k \} $ and $ C_k \in \mathcal{P}_n $ where $ \mathcal{P} $ is defined in the question.
We wish to show that $$ \lim_{n\lra\infty} | \ell - f | = 0 = \lim_{n\lra\infty} | f - u_n | $$  $ \lambda $ a.e.

It is obvious that $ \ell \leq f \leq u_n $ and so proving $$ \lim_{n\lra\infty} |u_n - \ell_n| = 0 $$ is sufficient.
Define $$ \phi_n := u_n - \ell_n = \sum_{k=1}^{N_n} (\beta_k - \alpha_k) \chi_{C_k}. $$
Firstly we must show $ \lim_{n\lra\infty} \phi_n $ exists $ \lambda $ a.e. This follows from the fact that $ \ell_n $ ( $u_n$ ) is a non-decreasing (non-increasing) sequence which is bounded above (below) by $ f $ which is also bounded. 

We now wish to establish that $ \lim_{n\lra\infty} \phi_n = 0 $. Note that 
$$
    \phi_n \leq \sup\{ f(x)-f(y) : x,y \in S \} \leq K\chi_{S}
$$
for some $ K $ because $ f $ is bounded. Now because $ S $ is bounded in $ \mathbb{R}^d $ we have that $ K\chi_S \in \mathcal{L}^1(S) $. The dominated convergence theorem therefore allows us to write  
\begin{align*}
    \int \lim_{n\lra\infty} \underbrace{\sum_{k=1}^{N_n}(\beta_k - \alpha_k) \chi_{C_k}}_{=\phi_n} d\lambda &=
        \lim_{n \lra\infty} \int \sum_{k=1}^{N_n} (\beta_k - \alpha_k) \chi_{C_k} d\lambda \\
    &=  \lim_{n \lra\infty} \sum_{k=1}^{N_n} (\beta_k - \alpha_k) \lambda(C_k) \text{ because } \phi_n \text{ is a simple function }\\
    &= 0 \text{ because } f \text{ is Riemann integrable }.
\end{align*}
This means that $ \lim_{n\lra\infty} \phi_n = 0 $, $ \lambda $ a.e. and hence $ \lim_{n\lra\infty} \ell_n = f = \lim_{n\lra\infty} \ell_n $, $ \lambda $ a.e.

We now show that the Riemann integral and the Lebesgue integral coincide. 
We have that 
$$
    |\ell_n| \leq M \chi_{S} 
$$
for some $ M $ because $ f $ is bounded. By the same argument as above $ M \chi_{S} \in \mathcal{L}^1(S) $. $ \lim_{n\lra\infty} \ell_n $ exists and equals $ f $ (this was established above), so by the dominated convergence theorem,
\begin{align*}
    \underbrace{\lim_{n\lra\infty} \int \ell_n d\lambda}_{\int_{S} f(x) dx} &= \int \underbrace{\lim_{n\lra\infty} \ell_n}_{\circledast} d\lambda \\
    &= \underbrace{\int f d\lambda}_{\text{Lebesgue integral}} \\
\end{align*}

\subsection{}
Let $ N = \{ x : \lim_{n\lra\infty}\ell_n(x) \neq \lim_{n\lra\infty}u_n(x) \} $ and
let $ X = S / (\partial S \cup N ) $. 
We wish to show that for all $ x \in X $ and $ \varepsilon > 0 $ there exists a $ \delta > 0 $ such that
$$ \sup\{ f(x_1) - f(x_2) : ||x-x_1|| < \delta, ||x-x_2|| < \delta \} < \varepsilon. $$
Fix $ x $ and $ \varepsilon $. As $ \lim_{n\lra\infty} (u_n - \ell_n) = 0 $ there exists an $ L $ such that $ n > L $ implies $ u_n - \ell_n < \varepsilon $
which is to say that 
\begin{align*}
    \sum_{k=1}^{N_n} (\beta_k - \alpha_k) \chi_{C_k} < \varepsilon
\end{align*}
which implies that
\begin{align*}
    (\beta_k - \alpha_k) < \varepsilon
\end{align*}
where $ x \in C_k $. Therefore chosing $ \delta = \inf\{ ||y-x|| : y \not\in C_k \} $ guarentees
$ \{ y : ||y - x || < \delta \} \subseteq C_k $ and hence $$ \sup\{ f(x_1) - f(x_2) : ||x-x_1|| < \delta, ||x-x_2|| < \delta \} < \varepsilon. $$
We now need to prove that $ \delta > 0 $. To do this we show that there exits a partitioning of $ S $ such that $$ \underbrace{\inf\{ || x_1 - x || : x_1 \not\in C_k \} > 0}_{\circledast}$$ for all $ x \in X $ so long as $ x \in C_k / (\partial C_k ) $. We then show that there always exists a partitioning of $ X $ such that $ x \not\in \partial C_k $ and the result will follow. 

A partitioning of $ S $ such that $ \circledast $ holds for all $ n $ is given by
\begin{align*}
    C_k = \Big( \frac{k(b_1 - a_1)}{q^n}, \frac{(k+1)(b_1 - a_1)}{q^n}\Big] \times \cdots \times \Big( \frac{k(b_d-a_d)}{q^n}, \frac{(k+1)(b_d-a_d)}{q^n} \Big]
\end{align*}
where $ q = 2 $. Now suppose that $ x \in \partial C_k $ then the $ \circledast $ would still hold when $ q = 3 $ but $ x \not\in \partial C_k $. 

\section{}
\subsection{}
Note that for $ E \in \mathcal{B} $
\begin{align*}
    \left(f^{-1}(E)\right)^c &= \left(\{ x \in X : f(x) \in E \}\right)^c \\
    &= \{ x \in X : f(x) \not\in E \} \\
    &= \{ x \in X : f(x) \in E^c \} \\
    &= f^{-1}(E^c).
\end{align*}
So if $ A \in \mathcal{A} $ then $ A^c \in \mathcal{A} $.

Also note that for $ E_1, E_2, \ldots $ 
we have that
\begin{align*}
    \bigcup_{i} f^{-1}(E_i) &= \bigcup_{i} \{ x \in X : f(x) \in E_i \} \\
        &= \left\{ x \in X : f(x) \in \bigcup_i E_i \right\} \\
        &= f^{-1}\left(\bigcup_i E_i \right).
\end{align*}
which means that if $ F_1, F_2, \ldots $ is some countable collection of sets in $ \mathcal{A} $ then their union is also in $ \mathcal{A} $.

Finnaly note that $ f^{-1}(Y) = X $. Therefore $ \mathcal{A} := \{ f^{-1}(B) : B \in \mathcal{B} \} $ is a $ \sigma$-algebra. 

Clearly if we remove any set from $ \mathcal{A} $ then $ f $ would not be $ \mathcal{A} $ measurable because there would exist a set $ B \in \mathcal{B} $ such that $ f^{-1}(B) \not\in \mathcal{A} $. 

\subsection{}
Define
\begin{align*}
    g : Y \lra Z \\
    g := \sum_{n} a_n \chi_{B_n}
\end{align*}
where $ B_n = f(h^{-1}(a_n)) $.
We just need show that $ g $ is measurable and that $ h = g \circ f $.
Firstly we show that $ B_n$ are measurable.
Note that as $ h $ is measurable then $ h^{-1}(a_n) \in \mathcal{A} $. Now as $ h^{-1}(a_n) \in \mathcal{A} $ then there exists a set $ B_n \in \mathcal{B} $ such that
$ f^{-1} B_n = h^{-1}(a_n) $ because of the definition of $ \mathcal{A} $ and thus $ B_n = f(h^{-1}(a_n)) $ is measurable. 

We now show that $ B_n $ are disjoint and hence $ h = g \circ f $. Suppse $ B_n \cap B_m \neq \emptyset $ for $ n \neq m $ then 
$$ f^{-1} (B_n \cap B_m) = (f^{-1} B_n) \cap (f^{-1} B_m) = h^{-1}(a_n) \cap h^{-1}(a_m) = h^{-1}( \{a_n\} \cap \{a_m\} ) = h^{-1} \emptyset \neq \emptyset $$
which is clearly a contradiction so the $ B_n $ are disjoint. It is easy to see then that $ g(f(x)) = a_n $ if $ h(x) = a_n $ and thus $ h = g \circ f $.

We now show that $ g $ is measurable. Firstly note that $ g^{-1} = f \circ h^{-1} $.

Suppose $ E \in \mathcal{C} $ and note that
\begin{align*}
g^{-1}E &= f \circ h^{-1} E \\
&= f \bigcup_{n \in I} \underbrace{h^{-1} a_n}_{\circledast}
\end{align*}
where $ I = \{ n : a_n \in E \} $.
$ \circledast $ is because if $ E \in \mathcal{C} $ and $ U := \{ a_n : n \in I, I \subseteq \mathbb{Z} \} \subseteq E $ then
$$ h^{-1} E = h^{-1} \left(U \cup \left(E \setminus U \right)\right) = h^{-1} \bigcup_{n\in I} a_n = \bigcup_{n \in I} h^{-1} a_n. $$
Now because $ h $ is measurable then
$$
D := \bigcup_{n \in I} h^{-1}a_n
$$
is the \emph{countable} union of measurable sets, hence measurable.
Then we just have to argue that
$$
fD \in \mathcal{B}.
$$
This is clear because $ D = f^{-1} E $ for some $ E \in \mathcal{B} $ and therefore $ fD = ff^{-1}E = E \in \mathcal{B} $.
Thus $ g $ is measurable.
\section{}
\subsection{}
\begin{align}
    & x \in \liminf_n A_n \llra x \in \bigcup_n \bigcap_{k\geq n} A_k \\
    & \llra \exists N \text{ such that } x \in \bigcap_{k\geq N} A_k \\
    & \llra \exists N \text{ such that } k \geq N \Longrightarrow x \in A_k \\
    & \llra \exists N \text{ such that } k \geq N \Longrightarrow \chi_{A_k}(x) = 1 \\
    & \llra \lim_{N \lra \infty} \inf_{n \geq N} \chi_{A_n}(x) = 1 \\
    & \llra \liminf_{n} \chi_{A_n}(x) = 1
\end{align}
Note that (3) is completely the same as saying that $ x \in A_k $ for all but finitely many $ A_k $ ( $ x \not\in A_k $ for at most $ N $ $ A_k $ ).
\subsection{}

\begin{align*}
    x \in \limsup_{n} A_n \\
    \limsup_{n} \chi_{A_n}(x) = 1\\
    x \in A_n \text{ for infinitely many } n 
\end{align*}
Clearly the third condition here is less restrictive than the third contion in 3.1 and so $ \liminf_n A_n \subseteq \limsup_n A_n $.
\section{}
\subsection{}
Clearly
\begin{align*}
    \emptyset \in \mathcal{A} \Longrightarrow \emptyset \in \mathcal{A}_{c} \\
\end{align*}
also if we let $ A \in \mathcal{A}_{c} $
\begin{align*}
    A^{c} &:= A^{c} \cap C
\end{align*}
and $ A^{c} \cap C \in \mathcal{A}_{c} $ because $ A^{c} \in \mathcal{A} $.

Now let $ \{ A_n \}_n \subseteq \mathcal{A}_{c} $ where $ A_n = A'_n \cap C $ with $ A'_n \in \mathcal{A} $ then 
\begin{align*}
    \bigcup_{n} A_n &= \bigcup_{n} (A'_n \cap C) \\
        &= \bigcup_{n} (A'_n \cap C) \\
        &= C \cap \underbrace{\bigcup_{n} (A'_n)}_{\in \mathcal{A}}
\end{align*}
and thus 
$$
    \bigcup_{n} A_n \in \mathcal{A}_{c}.
$$
\subsection{}
Let $ \{ A_n \}_n \subseteq \mathcal{A} $ be a sequence of sets such that $ A_n \subseteq A_{n+1} $, $ A_n \subseteq B $ for all $ n $ and 
$$ \lim_{n \lra \infty} \mu(A_n) = \sup_{n} \{ \mu(A) : A \subseteq B \}. $$

Firstly we show such a sequence exists.

Suppose such a sequence did not exist. Then for all sequences $ \{E_n\}_n \subseteq \mathcal{A} $ there exists a $ \varepsilon > 0 $ such that
$$ \lim_{n\lra\infty} \mu(E_n) \leq \sup_n \{ \mu(A) : A \subseteq B \} - \varepsilon. $$ 
Now because the $ \sup $ must exist because this is a finite measure space there must exist an $ A' \in \mathcal{A} $ such that
$$ \mu(A') - \sup\{ \mu(A) : A \subseteq B \} < \frac{\varepsilon}{2}. $$ Then we can construct a sequence $ \{ E_n \cup A' \}_n \subseteq \mathcal{A} $ such that
$$
    \lim_{n\lra\infty} \mu(E_n \cup A') >  \sup_{n} \{ \mu(A) : A \subseteq B \} - \varepsilon
$$
which is a contradiction.

Returning to the sequence $ \{ A_n \}_n $ note that 
\begin{align*}
    \bigcup_{n} A_n \in \mathcal{A} 
\end{align*} 
and that
\begin{align*}
    \lim_{n\lra\infty} \mu(A_n) = \mu\left( \bigcup_n A_n \right)    
\end{align*}
and hence there exists an $ A_0 := \cup_{n} A_n $ such that $ \mu(A_0) = \mu_{*}(B) $.

Using a symetric argument to that above we can argue that there exists a sequence
$ \{ A_n \}_n \subseteq \mathcal{A} $ such that $ A_{n+1} \subseteq A_n $, $ A_n \supseteq B $ for all $ n $ and that 
$$ \lim_{n \lra \infty} \mu(A_n) = \inf\{ \mu(A) : A \supseteq B \}. $$
Now note that
$$
    \bigcap_{n} A_n \in \mathcal{A}
$$
and so
$$
    \lim_{n \lra \infty} \mu(A_n) = \mu\left( \bigcap_n A_n \right)
$$
and thus there exists $ A_1 \:= \cap_n A_n $ such that $ \mu(A_1) = \mu^*(B) $.
\subsection{}
$ A_1 $ and $ A_2 $ must be $\mathcal{M}( \mu*) $ measurable which means that for $ C $ we must have
\begin{align*}
    \mu^*(C) &= \mu^*(C \cap A_1) + \mu^*(C \setminus A_1 ) 
\end{align*}
and
\begin{align*}
    \mu^*(C) &= \mu^*(C \cap A_2) + \mu^*(C \setminus A_2) 
\end{align*}
It is not hard to see that

\begin{align*}
   \mu^*(C \setminus A_1) \leq \mu(C_1 \setminus A_1).
\end{align*}
Clearly $ (C_1 \setminus A_1) \supseteq (C \setminus A_1) $ and $ (C_1 \setminus A_1) \in \mathcal{A} $ so
$$ \inf\{ \mu(E) : E \supseteq (C \setminus A_1), E \in \mathcal{A} \} $$
thus $ \mu^*(C \setminus A_1) \leq \mu(C_1 \setminus A_1) $. By the same reasoning $ \mu^*(C \setminus A_2) \leq \mu(C_1 \setminus A_2) $. 

We can then see that
$$
    \mu(C_1) = \mu^*(C) \leq \mu^*(C\cap A_1) + \mu(C_1 \setminus A_1 )
$$
and so
$$
    \mu(C_1 \cap A_1) \leq \mu^*(C \cap A_1)
$$
and likewise
$$
    \mu(C_1 \cap A_2) \leq \mu^*(C \cap A_2)
$$
The reverse inequality holds because $ (C_1 \cap A_1) \in \mathcal{A} $ and 
$$ \inf\{ \mu(E) : E \supseteq (C \cap A_1), E \in \mathcal{A} \} \leq \mu(C_1 \cap A_1). $$
Likewise for $ A_2 $. So $ \mu^*(C \cap A_1) = \mu( C_1 \cap A_1 )$. Now because $ A_1\cap C = A_2\cap C $ the  it is clear to see
that $ \mu^*(C \cap A_1) = \mu^*( C \cap A_2) $ and hence $ \mu(C_1 \cap A_1) = \mu(C_1 \cap A_2) $.
\subsection{}

In the arguments above we show that for $ A \in \mathcal{A} $ we have $ \mu^*(A \cap C) = \mu(A \cap C_1) $ and $ C_1 $ was arbitrary, so long as $ \mu(C_1) = \mu^*(C) $. In 4.2 we showed at least one such $ C_1 $ must exist and so $ \mu_C $ is well defined and $ \mu_C = \mu^* $. 
\subsection{}
Let $ \{ A_{C_n} \}_n \subseteq \mathcal{A}_C $ such that the $ A_{C_n} $ are all mutually disjoint. Then
\begin{align*}
    \mu_C\left( \bigcup_n A_{C_n} \right) &= \mu\left( \left( \bigcup_n A_{C_n} \right) \cap C_1 \right) \\
        &=  \mu\left( \bigcup_n (A_{C_n} \cap C_1) \right) \\
        &= \sum_n \mu(A_{C_n} \cap C_1) \text{ because the } (A_{C_n} \cap C) \text{ must be mutually disjoint }\\
        &= \sum_n \mu_C ( A_{C_n})
\end{align*}
and so $ \mu_C $ is a measure. 
\end{document}
